---
title: Overview
description: Schema-validated filter builder for vector databases
author: zoobzio
published: 2025-01-01
updated: 2025-01-14
tags: [vecna, vector-database, filters, go]
---

# Overview

vecna provides schema-validated filter construction for vector database queries. Define your metadata schema as a Go struct, and vecna validates every filter field name against that schema at build time — catching typos and invalid fields before they reach your database.

## The Idea

Vector databases filter results by metadata. You write queries like "category equals tech and score greater than 0.8" against fields stored alongside your embeddings. But these field names are strings — typos compile fine and only fail at query time, often silently returning empty results.

What if the filter builder knew your schema? Field names could be validated immediately. Type mismatches (comparing strings with greater-than) could be caught at construction time. The gap between "filter built" and "filter correct" could close to zero.

## The Implementation

vecna extracts your metadata schema from a Go struct and validates filters against it:

- **Schema extraction** — Uses struct field names and `json` tags to build a field registry
- **Field validation** — Every `Where("field")` call checks the field exists in the schema
- **Type checking** — Comparison operators blocked on non-numeric fields
- **Deferred errors** — Build complex filter trees, check for errors once at the end
- **Serializable specs** — Construct filters from JSON for dynamic queries and LLM integration

## What It Enables

vecna powers the filter system in [grub](https://github.com/zoobzio/grub), providing schema-validated queries across vector database providers:

- **Pinecone** — Metadata filtering with namespace support
- **Qdrant** — Payload filtering with collection management
- **Weaviate** — Property filtering with class schemas
- **Milvus** — Expression filtering with partition support
- **pgvector** — SQL WHERE clauses with JSONB metadata

The `FilterSpec` type enables filters to be stored, transmitted, and generated programmatically — opening the door to saved searches, API-driven queries, and LLM-generated filters that remain schema-validated.

## Next Steps

- [Quickstart](2.quickstart.md) — Get running in minutes
- [Concepts](3.concepts.md) — Understand the mental models
- [API Reference](../4.reference/1.api.md) — Complete function documentation
